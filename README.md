# http2-dump-anatomy
A command line tool that decodes traffic dump and associates HTTP traffic with the corresponding TCP packets. 


## The analyzer

```
usage: http_traffic_analyzer.py [-h] [-k KEY] [-a] [-b BIN] [-o OUTPUT] [-g]
                                [-s] [-q] [-v]
                                dumpfile

HTTP(2) traffic analyzer for tcpdump file.

positional arguments:
  dumpfile              The .pcap file generated by tcpdump

optional arguments:
  -h, --help            show this help message and exit
  -k KEY, --key KEY     The ssl key file the browser dumped (default: None)
  -a, --all             Also work on traffic other than TCP over port 80 or
                        port 443 (default: False)
  -b BIN, --bin BIN     Path to the tshark binary (default: None)
  -o OUTPUT, --output OUTPUT
                        Output file path instead of STDOUT (default: None)
  -g, --heuristic       Enable weak HTTP2 heuristic. Google traffic may need
                        it. Beware: false positives (default: False)
  -s, --sort            Sort output by objects' timestamp (instead of group by
                        url) (default: False)
  -q, --quiet           Only print errors (default: False)
  -v, --verbose         Print debug info. (default: False)
```

## The merger
```
usage: merge_har.py [-h] [-f FILE] [-o OUTPUT] [-t THRESHOLD] [-q] [-v]
                    harfile

Merge the output from HTTP analyzer to HAR file

positional arguments:
  harfile               Path to the HAR file

optional arguments:
  -h, --help            show this help message and exit
  -f FILE, --file FILE  Read from a tcp timing file in JSON format instead of
                        STDIN (default: None)
  -o OUTPUT, --output OUTPUT
                        Output file path instead of STDOUT (default: None)
  -t THRESHOLD, --threshold THRESHOLD
                        The threshold (ms) for matching objects. If the
                        difference of timestamps of the same object in HAR and
                        tcp timing is beyond the threshold, the record is
                        discarded. (default: 10.0)
  -q, --quiet           Only print errors (default: False)
  -v, --verbose         Print debug info. (default: False)
```
